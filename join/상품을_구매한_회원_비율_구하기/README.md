### 테이블 만들어서 테스트하는 코드
```sql
-- create a table
CREATE TABLE USER_INFO (
  USER_ID INTEGER PRIMARY KEY,
  JOINED DATE NOT NULL
);
-- insert some values
INSERT INTO USER_INFO VALUES (1, '2021-06-01');
INSERT INTO USER_INFO VALUES (2, '2021-06-25');
INSERT INTO USER_INFO VALUES (3, '2021-06-30');
INSERT INTO USER_INFO VALUES (4, '2021-07-03');
INSERT INTO USER_INFO VALUES (5, '2022-01-09');
INSERT INTO USER_INFO VALUES (6, '2022-02-14');

-- create a table
CREATE TABLE ONLINE_SALE (
  ONLINE_SALE_ID INTEGER PRIMARY KEY,
  USER_ID INTEGER NOT NULL,
  SALES_DATE DATE NOT NULL
);
-- insert some values
INSERT INTO ONLINE_SALE VALUES (1, 1, '2022-01-01');
INSERT INTO ONLINE_SALE VALUES (2, 1, '2022-01-25');
INSERT INTO ONLINE_SALE VALUES (3, 4, '2022-01-30');
INSERT INTO ONLINE_SALE VALUES (4, 6, '2022-02-03');
INSERT INTO ONLINE_SALE VALUES (5, 2, '2022-02-09');
INSERT INTO ONLINE_SALE VALUES (6, 5, '2022-02-14');
INSERT INTO ONLINE_SALE VALUES (7, 5, '2022-02-18');


WITH JOINED_U (USER_ID) AS
(
    SELECT USER_ID
        FROM USER_INFO
        WHERE YEAR(JOINED) = 2021
)

SELECT YEAR(SALES_DATE) AS YEAR,
        MONTH(SALES_DATE) AS MONTH,
        COUNT(DISTINCT JOINED_U.USER_ID) AS PURCHASED_USERS,
        ROUND(COUNT(DISTINCT JOINED_U.USER_ID) / (
            SELECT COUNT(*)
                FROM JOINED_U
        ), 1) AS PURCHASED_RATIO
    FROM JOINED_U
    INNER JOIN ONLINE_SALE
        ON JOINED_U.USER_ID = ONLINE_SALE.USER_ID
    GROUP BY YEAR, MONTH
    ORDER BY YEAR ASC, MONTH ASC;
```

### Reference
[문제](https://school.programmers.co.kr/learn/courses/30/lessons/131534)<br>
